# appvelox_intership_api

REST API для ведения персонального списка задач 

Аутентификация по JWT-токену

Предоставляет данные в формате JSON

### Возможности API

- Получить список всех задач
- Поиск всех выполненных/невыполненных задач
- Получить информацию о конкретной задачи
- Отметить задачу как выполненную
- Удалить задачу
- Зарегистрировать пользователя
- Получение/обновление JWT-токена(только для зарегистрированных пользователей)


## Технологии
Python, Django, Django Rest Framework, PyJWT

## Как запустить
На локальном компьютере должен быть установлен Python версии 3 или выше

- Склонировать данный репозиторий на свой локальный компьютер
- Установить виртуальное окружение используя команду `python3 -m venv venv`
- Установить необходимые библиотеки используя команду `pip install -r requirements.txt`. Для обновления pip можно использовать команду `py -m pip install --upgrade pip` или другую аналогичную
- Установить SECRET_KEY в переменные окружения командой `export SECRET_KEY=<your_key>`
- Выполнить миграции командой `py manage.py migrate`. 
- Запустить локальный сервер командой `py manage.py runserver`

## Алгоритм регистрации и аутентификация пользователей
- Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами username и password на эндпоинт /api/v1/auth/signup/
- Пользователь отправляет POST-запрос с параметрами username и password на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен). В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.

## Примеры запросов

Доступно для всех юзеров:
- `GET http://127.0.0.7/api/v1/categories/` - вернет список категорий. Можно использовать поиск по названию категории, добавив `?search=name`.
 
- `GET http://127.0.0.7/api/v1/genres/` - вернет список жанров. Можно использовать поиск по названию жанра, добавив `?search=name`.

- `GET http://127.0.0.7/api/v1/titles/` - вернет список произведений. Если затем указать `<title_id>`, можно вывести одно произведение.

Юзер с правами администратора может отправять запросы `POST` по этим же url следующего вида: 
- для titles: 
`{
  "name": "string",
  "year": 0,
  "description": "string",
  "genre": [
    "string"
  ],
  "category": "string"
}`
- для categories и genres: 
`{
  "name": "string",
  "slug": "string"
}`

Обычному юзеру доступны для `GET` и `POST` разделов reviews и comments:
- `http://127.0.0.7/api/v1/titles/<title_id>/reviews/`
- `http://127.0.0.7/api/v1/titles/<title_id>/reviews/<review_id>/comments/`

Автор может редактировать и удалять свои отзывы и комменты через `PATCH` и `DELETE` запросы по id отзыва или коммента.
- `http://127.0.0.7/api/v1/titles/<title_id>/reviews/<review_id>/`
- `http://127.0.0.7/api/v1/titles/<title_id>/reviews/<review_id>/comments/<comment_id>/`

Юзер с правами модератора или админа может редактировать и удалять отзывы других пользователей.

## Авторы
[Марат Ахметов](https://github.com/marashka) - управление пользователями, система регистрации и аутентификации, права доступа, работа с токеном, система подтверждения через e-mail.

[Андрей Киселев](https://github.com/Faelris) - модели, view и эндпоинты для категорий, жанров, произведений, импорт из csv в db, права доступа, фильтры.

[Сергей Крючков](https://github.com/Serg-7x) - модели, view и эндпоинты для отзывов и комментариев, вывод рейтинга для произведений.
